name: CI

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master
 
jobs:
  test_osx:
    name: baseinst_mac
    runs-on: macos-13
    steps:
      - name: Get source
        uses: actions/checkout@v3
      - name: base_inst
        run: tests/test-basic.sh osx
        


  test_ubuntu_light:
    name: baseinst_linux
    runs-on: ubuntu-22.04
    steps:
      - name: Get source
        uses: actions/checkout@v3
      - name: base_inst
        run: tests/test-basic.sh

  fs_matrix: 
    strategy:
      matrix:
        fs: [fedora:38, ubuntu:22.04, debian:latest]
    runs-on: ubuntu-22.04
    steps:
        - name: Get source
          uses: actions/checkout@v3
        - name: base_inst
          run: tests/fs.sh "${{ matrix.fs }}" tests/test-basic.sh

     
        




            
  #
  # test:
  #   name: baseinst
  #   runs-on: ubuntu-22.04
  #
  #   steps:
  #     - name: GetFilesystems
  #       run: |
  #         #sudo apt update
  #         sudo apt-get -qy install podman systemd-container
  #         podman pull fedora:38
  #         podman pull debian:12
  #
  #     - name: Get source
  #       uses: actions/checkout@v3
  #
  #
  #     - name: test
  #       run: |
  #         tests/test.sh fedora:38
  #         tests/test.sh debian:12
  #
